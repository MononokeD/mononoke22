<div class="container py-4">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="fw-bold text-primary mb-0">
      üìö Bookshelf
    </h1>
    <div>
      <%= link_to "Authors", authors_path, class: "btn btn-outline-info me-2" %>
      <%= link_to "‚ûï New Book", new_book_path, class: "btn btn-primary" %>
    </div>
  </div>

  <!-- –§–æ—Ä–º–∞ –ø–æ—à—É–∫—É -->
  <div class="card shadow-sm border-0 mb-4">
    <div class="card-header bg-light">
      <h5 class="mb-0 text-secondary">üîç Search & Sort</h5>
    </div>
    <div class="card-body">
      <%= form_with url: books_path, method: :get, local: true do %>
        <div class="row g-3 align-items-center">
          <div class="col-md-4">
            <%= text_field_tag :search_title, params[:search_title], 
                class: "form-control", 
                placeholder: "Search by title..." %>
          </div>
          <div class="col-md-3">
            <%= text_field_tag :search_author, params[:search_author], 
                class: "form-control", 
                placeholder: "Search by author..." %>
          </div>
          <div class="col-md-3">
            <%= select_tag :sort, 
                options_for_select([
                  ["Sort by...", ""],
                  ["Title (A-Z)", "title_asc"],
                  ["Title (Z-A)", "title_desc"],
                  ["Year (Old to New)", "year_asc"],
                  ["Year (New to Old)", "year_desc"]
                ], params[:sort]), 
                class: "form-select" %>
          </div>
          <div class="col-md-2 d-grid">
            <%= submit_tag "Search", class: "btn btn-primary" %>
          </div>
        </div>

        <% if params[:search_title].present? || params[:search_author].present? || params[:sort].present? %>
          <div class="mt-3 text-end">
            <%= link_to "Clear filters", books_path, class: "btn btn-outline-secondary btn-sm" %>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>

  <!-- –¢–∞–±–ª–∏—Ü—è –∫–Ω–∏–≥ -->
  <div class="card shadow-sm border-0">
    <div class="card-header bg-light d-flex justify-content-between align-items-center">
      <h5 class="mb-0 text-secondary">
        All Books 
        <span class="badge bg-primary ms-2"><%= @books.count %></span>
      </h5>
    </div>

    <div class="card-body p-0">
      <% if @books.any? %>
        <div class="table-responsive">
          <table class="table table-hover align-middle mt-3 shadow-sm bg-white rounded">
  <thead class="table-light">
    <tr>
      <th>Title</th>
      <th>Author</th>
      <th>Year</th>
      <th class="text-end">Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @books.each do |book| %>
      <tr>
        <td><%= link_to book.title, book_path(book), class: "fw-semibold text-decoration-none text-dark" %></td>
        <td><%= link_to book.author.name, author_path(book.author), class: "text-decoration-none text-primary" %></td>
        <td><%= book.year %></td>
        <td class="text-end">
          <td class="text-end">
          <%= link_to "Show", book_path(book), class: "btn btn-sm btn-primary me-1 text-white" %>
          <%= link_to "Edit", edit_book_path(book), class: "btn btn-sm btn-success me-1 text-white" %>
          <%= link_to "Delete", book, 
              method: :delete, 
              data: { confirm: "Are you sure?" }, 
              class: "btn btn-sm btn-danger text-white" %>
</td>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
        </div>
      <% else %>
        <div class="p-4 text-center text-muted">
          <p class="mb-2">üìñ No books found.</p>
          <% if params[:search_title].present? || params[:search_author].present? %>
            <p>Try <%= link_to "clearing filters", books_path, class: "text-decoration-none text-primary" %> or</p>
          <% end %>
          <%= link_to "add your first book", new_book_path, class: "btn btn-primary mt-2" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
